import{r as o,W as N,j as s,a as v,B as u}from"./app-B73aNjnd.js";import{L as y}from"./Layout-CyryUbzw.js";import{t}from"./translations-CBxNckOR.js";import{P as w}from"./PageHeader-CBsXy6T3.js";import{P as R}from"./index-CLA8QPfP.js";import{C as D}from"./index-Bl1PYzdV.js";import"./RolesList-DFr9NdvW.js";import{DeleteRole as E}from"./DeleteRole-BboaChmW.js";import{c as S,a as C}from"./chunk-H4VOEXHF-D0Xt-fkg.js";import{c as P}from"./chunk-6EHM2IL6-Dej1pyxF.js";import{c as _}from"./chunk-KBN3H6OQ-CQsmlBiE.js";import{b as h}from"./chunk-DBLREEYE-D6vzpY_n.js";import"./useColorMode-5v_XiiRX.js";import"./chunk-3XVMTUU7-Dp_cF4cz.js";import"./extend-tailwind-merge-DDA0jNcl.js";import"./chunk-VMWQTXAV-D2ifQli6.js";import"./chunk-XHQUSKIE-B16IZcCX.js";import"./chunk-N2KXC5ZE-DBD4xwut.js";import"./chunk-CIZQCQPA-C2ysd0Fb.js";import"./index-BKHz38cK.js";import"./useToggleState-DPTtk9cz.js";import"./focusSafely-ayMLw8ui.js";import"./useFocusable-KNJiKUgw.js";import"./useSyncRef-BnJNsFWS.js";import"./useFocus-Jb_1JH4M.js";import"./usePress-BxsRSbXd.js";import"./textSelection-Bdx306yo.js";import"./context-C8SwmHwE.js";import"./VisuallyHidden-CVybe5pM.js";import"./template.executive.config-JRgdiSJO.js";import"./chunk-44JHHBS2-B7E72yne.js";import"./layout-Cnm3eq9B.js";import"./useDialog-DinOM5Fu.js";import"./useLabels-CqVFLFT_.js";import"./isScrollable-C-zzJ19Q.js";import"./FocusScope-Q_seLLKW.js";import"./chunk-6NL67ZRH-DD6EpadO.js";import"./useOverlayTriggerState-DhG8YGBS.js";import"./useMenuTriggerState-Bdg_6lWL.js";import"./Item-Cr_3adQs.js";import"./getChildNodes-BbnIxB5F.js";import"./chunk-WQVQ7P2I-CG_H71MO.js";import"./chunk-2GZPFWUB-DujZQCQ1.js";import"./chunk-QXREVWCS-Cwo7OCcW.js";import"./chunk-CAFRINWI-BTDo8zfp.js";import"./index-BnsDL4B6.js";import"./chunk-NQM3AZQR-CKZZ5xcp.js";import"./useField-B_F-zLXq.js";import"./useLabel-ChkjK81L.js";import"./useFormValidationState-LLVN8A0f.js";import"./chunk-4WFLSIHH-JZOBIhus.js";import"./chunk-M3MASYO7-C4GQgy2m.js";import"./chunk-YRZGWF2W-CfVRf2QO.js";import"./getScrollParent-BeofMkPJ.js";import"./chunk-7F3ZLNJ6-BI72z8-K.js";import"./chunk-MRXO6UUP-Cy_Uh5KD.js";import"./index-DmNp4kFG.js";import"./index-CMoRDRPr.js";import"./chunk-P2T5LMDM-DE6aEvc8.js";const L=({role:r,permissions:l,protected_roles:m})=>{const x=o.useRef((r&&(m==null?void 0:m.includes(r.name)))??!1),c=o.useRef(null),{data:n,setData:p,post:f,patch:g,processing:i,errors:d,clearErrors:j}=N({name:"",permissions:[]});o.useEffect(()=>{var a;(a=c.current)==null||a.focus()},[]),o.useEffect(()=>{r&&p({name:r.name,permissions:r.permissions.map(a=>a.name)})},[r]);const b=a=>{a.preventDefault(),r?g(route("dashboard.role.update",{role:r}),{preserveScroll:!0,onSuccess:e=>{e.props.flash&&e.props.flash.success&&u.success(t(e.props.flash.success))},onError:e=>console.log(e)}):f(route("dashboard.role.store"),{preserveScroll:!0,onSuccess:e=>{e.props.flash&&e.props.flash.success&&u.success(t(e.props.flash.success))},onError:e=>console.log(e)})};return s.jsxs(s.Fragment,{children:[s.jsx(w,{title:r?t("Role"):t("New Role")}),s.jsxs(R,{children:[s.jsx("div",{className:"max-w-md space-y-10 lg:max-w-3xl",children:s.jsxs("div",{className:"grid gap-x-6 gap-y-10 lg:grid-cols-2 lg:gap-x-16",children:[s.jsxs("div",{className:"w-52 space-y-6 lg:order-2",children:[s.jsx(S,{className:"bg-content4 mt-5 min-h-20",shadow:"none",radius:"md",children:s.jsx(C,{children:s.jsx("div",{className:"text-foreground-800 space-y-2",children:r?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-right",children:"Total users with this role"}),s.jsx("p",{className:"text-4xl font-light tracking-tighter text-right",children:r.users_count})]}):s.jsx("p",{className:"text-sm",children:t("Dere are no users with this role")})})})}),r&&s.jsx(E,{role:r})]}),s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[s.jsx("fieldset",{children:s.jsx(D,{isRequired:!0,ref:c,variant:"faded",value:n.name,label:t("Role name"),isInvalid:!!d.name,errorMessage:d.name,onKeyUp:()=>j("name"),isDisabled:x.current||i,onValueChange:a=>p("name",a)})}),s.jsx("fieldset",{className:"space-y-6",children:Object.keys(l).map(a=>s.jsx("div",{children:s.jsx(P,{label:`${a} ${t("guards")}`,size:"sm",value:n.permissions,isDisabled:i,onValueChange:e=>{p("permissions",e)},classNames:{label:"text-foreground text-sm font-medium capitalize"},children:l[a].map(e=>s.jsx("div",{className:"flex items-center gap-3",children:s.jsx(_,{value:e.name,className:"py-3",children:e.name},e.name)},e.name))})},a))}),s.jsxs("div",{className:"flex gap-5 pt-4",children:[s.jsx(h,{type:"button",as:v,isDisabled:i,href:route("dashboard.roles.list"),className:"w-32",children:t("Cancel")}),s.jsx(h,{type:"submit",color:"primary",className:"w-32",isLoading:i,children:t("Save")})]})]})]})}),s.jsx("div",{className:"h-10"})]}),s.jsx("div",{className:"h-20"})]})};L.layout=r=>s.jsx(y,{children:r,pageTitle:String(t("Roles"))});export{L as Page,L as default};
